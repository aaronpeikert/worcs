<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Scans the WORCS project file for data that have been saved using
open_data or closed_data, and loads these data
into the global (working) environment. The function will load the original
data if available on the current system. If only a synthetic dataset is
available, this function loads the synthetic data.
The name of the object containing the data is derived from the file name by
removing the file extension, and, when applicable, the prefix
"synthetic_". Thus, both "data.csv" and
"synthetic_data.csv" will be loaded into an object called data.'><title>Load WORCS project data — load_data • worcs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Load WORCS project data — load_data"><meta property="og:description" content='Scans the WORCS project file for data that have been saved using
open_data or closed_data, and loads these data
into the global (working) environment. The function will load the original
data if available on the current system. If only a synthetic dataset is
available, this function loads the synthetic data.
The name of the object containing the data is derived from the file name by
removing the file extension, and, when applicable, the prefix
"synthetic_". Thus, both "data.csv" and
"synthetic_data.csv" will be loaded into an object called data.'><meta property="og:image" content="https://cjvanlissa.github.io/worcs/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">worcs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.16</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/citation.html">Citing references in worcs</a>
    <a class="dropdown-item" href="../articles/endpoints.html">Using Endpoints to Check Reproducibility</a>
    <a class="dropdown-item" href="../articles/git_cloud.html">Connecting to 'Git' remote repositories</a>
    <a class="dropdown-item" href="../articles/reproduce.html">Reproducing a WORCS project</a>
    <a class="dropdown-item" href="../articles/setup-docker.html">Setting up your computer for WORCS - Docker-edition</a>
    <a class="dropdown-item" href="../articles/setup.html">Setting up your computer for WORCS</a>
    <a class="dropdown-item" href="../articles/synthetic_data.html">Using Custom Synthetic Data</a>
    <a class="dropdown-item" href="../articles/targets.html">Using targets to Reduce Redundant Computations</a>
    <a class="dropdown-item" href="../articles/workflow.html">The WORCS workflow, version 0.1.16</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cjvanlissa/worcs/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Load WORCS project data</h1>
      <small class="dont-index">Source: <a href="https://github.com/cjvanlissa/worcs/blob/HEAD/R/save_load.R" class="external-link"><code>R/save_load.R</code></a></small>
      <div class="d-none name"><code>load_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Scans the WORCS project file for data that have been saved using
<code><a href="open_data.html">open_data</a></code> or <code><a href="closed_data.html">closed_data</a></code>, and loads these data
into the global (working) environment. The function will load the original
data if available on the current system. If only a synthetic dataset is
available, this function loads the synthetic data.
The name of the object containing the data is derived from the file name by
removing the file extension, and, when applicable, the prefix
<code>"synthetic_"</code>. Thus, both <code>"data.csv"</code> and
<code>"synthetic_data.csv"</code> will be loaded into an object called <code>data</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_data</span><span class="op">(</span></span>
<span>  worcs_directory <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  to_envir <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use_metadata <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>worcs_directory</dt>
<dd><p>Character, indicating the WORCS project directory from
which to load data. The default value <code>"."</code> points to the current
directory.</p></dd>


<dt>to_envir</dt>
<dd><p>Logical, indicating whether to load objects directly into
the environment, or return a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code> containing the objects. The
environment is designated by argument <code>envir</code>. Loading
objects directly into the global environment is user-friendly, but has the
risk of overwriting an existing object with the same name, as explained in
<code><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></code>. The function <code>load_data</code> gives a warning when this
happens.</p></dd>


<dt>envir</dt>
<dd><p>The environment where the data should be loaded. The default
value <code>parent.frame(1)</code> refers to the global environment in an
interactive session.</p></dd>


<dt>verbose</dt>
<dd><p>Logical. Whether or not to print status messages to
the console. Default: TRUE</p></dd>


<dt>use_metadata</dt>
<dd><p>Logical. Whether or not to use the codebook and
value labels and attempt to coerce the class and values of variables to
those recorded therein. Default: TRUE</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a list invisibly. If <code>to_envir = TRUE</code>, this list
contains the loaded data files. If <code>to_envir = FALSE</code>, the list is
empty, and the loaded data files are attached directly to the global
environment.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">test_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"loaddata"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">old_wd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">test_dir</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">test_dir</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">worcs</span><span class="fu">:::</span><span class="fu">write_worcsfile</span><span class="op">(</span><span class="st">".worcs"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="closed_data.html">closed_data</a></span><span class="op">(</span><span class="va">df</span>, codebook <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Storing original data in 'df.csv' and updating the checksum in '.worcs'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Generating synthetic data for public use. Ensure that no identifying</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   information is included.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |==============                                                        |  20%  |                                                                              |============================                                          |  40%  |                                                                              |==========================================                            |  60%  |                                                                              |========================================================              |  80%  |                                                                              |======================================================================| 100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Storing synthetic data in <span style="color: #0000BB;">"fn_write_synth_rel"</span> and updating the checksum in <span style="color: #0000BB;">"</span>…</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Updating '.gitignore'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Storing synthetic data in <span style="color: #0000BB;">"fn_write_synth_rel"</span> and updating the checksum in <span style="color: #0000BB;">"</span>…</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Storing synthetic data in <span style="color: #0000BB;">"fn_write_synth_rel"</span> and updating the checksum in <span style="color: #0000BB;">"</span>…</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Updating '.gitignore'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Storing value labels in 'value_labels_df.yml'.</span>
<span class="r-in"><span><span class="fu">load_data</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Loading original data from 'df.csv'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> No valid codebook found.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Object 'df' already exists in the environment designated by 'envir', and will be replaced with the contents of 'df.csv'.</span>
<span class="r-in"><span><span class="va">data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function (..., list = character(), package = NULL, lib.loc = NULL, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     verbose = getOption("verbose"), envir = .GlobalEnv, overwrite = TRUE) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     fileExt &lt;- function(x) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         db &lt;- grepl("\\.[^.]+\\.(gz|bz2|xz)$", x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ans &lt;- sub(".*\\.", "", x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ans[db] &lt;- sub(".*\\.([^.]+\\.)(gz|bz2|xz)$", "\\1\\2", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             x[db])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ans</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     my_read_table &lt;- function(...) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         lcc &lt;- Sys.getlocale("LC_COLLATE")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         on.exit(Sys.setlocale("LC_COLLATE", lcc))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sys.setlocale("LC_COLLATE", "C")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         read.table(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     stopifnot(is.character(list))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     names &lt;- c(as.character(substitute(list(...))[-1L]), list)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (!is.null(package)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         if (!is.character(package)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             stop("'package' must be a character vector or NULL")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- find.package(package, lib.loc, verbose = verbose)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (is.null(lib.loc)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             paths)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- unique(normalizePath(paths[file.exists(paths)]))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- paths[dir.exists(file.path(paths, "data"))]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dataExts &lt;- tools:::.make_file_exts("data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (length(names) == 0L) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         db &lt;- matrix(character(), nrow = 0L, ncol = 4L)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         for (path in paths) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             entries &lt;- NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             packageName &lt;- if (file_test("-f", file.path(path, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "DESCRIPTION"))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 basename(path)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             else "."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (file_test("-f", INDEX &lt;- file.path(path, "Meta", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "data.rds"))) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 entries &lt;- readRDS(INDEX)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 dataDir &lt;- file.path(path, "data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 entries &lt;- tools::list_files_with_type(dataDir, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   "data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (length(entries)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   entries &lt;- cbind(entries, "")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (NROW(entries)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   db &lt;- rbind(db, cbind(packageName, dirname(path), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     entries))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 else warning(gettextf("data index for package %s is invalid and will be ignored", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   sQuote(packageName)), domain = NA, call. = FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         colnames(db) &lt;- c("Package", "LibPath", "Item", "Title")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         footer &lt;- if (missing(package)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             paste0("Use ", sQuote(paste("data(package =", ".packages(all.available = TRUE))")), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "\n", "to list the data sets in all *available* packages.")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         else NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         y &lt;- list(title = "Data sets", header = NULL, results = db, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             footer = footer)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         class(y) &lt;- "packageIQR"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         return(y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- file.path(paths, "data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     for (name in names) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         found &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         for (p in paths) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             tmp_env &lt;- if (overwrite) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 envir</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             else new.env()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (file_test("-f", file.path(p, "Rdata.rds"))) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 rds &lt;- readRDS(file.path(p, "Rdata.rds"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (name %in% names(rds)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   found &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     message(sprintf("name=%s:\t found in Rdata.rds", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       name), domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   thispkg &lt;- sub(".*/([^/]*)/data$", "\\1", p)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   thispkg &lt;- sub("_.*$", "", thispkg)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   thispkg &lt;- paste0("package:", thispkg)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   objs &lt;- rds[[name]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   lazyLoad(file.path(p, "Rdata"), envir = tmp_env, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     filter = function(x) x %in% objs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   break</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 else if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     name, paste(names(rds), collapse = ",")), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             files &lt;- list.files(p, full.names = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             files &lt;- files[grep(name, files, fixed = TRUE)]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (length(files) &gt; 1L) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 o &lt;- match(fileExt(files), dataExts, nomatch = 100L)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 paths0 &lt;- dirname(files)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 paths0 &lt;- factor(paths0, levels = unique(paths0))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 files &lt;- files[order(paths0, o)]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (length(files)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 for (file in files) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     message("name=", name, ":\t file= ...", .Platform$file.sep, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       basename(file), "::\t", appendLF = FALSE, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   ext &lt;- fileExt(file)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (basename(file) != paste0(name, ".", ext)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     found &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     found &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     switch(ext, R = , r = {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       library("utils")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       sys.source(file, chdir = TRUE, envir = tmp_env)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     }, RData = , rdata = , rda = load(file, envir = tmp_env), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       TXT = , txt = , tab = , tab.gz = , tab.bz2 = , </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       tab.xz = , txt.gz = , txt.bz2 = , txt.xz = assign(name, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         my_read_table(file, header = TRUE, as.is = FALSE), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         envir = tmp_env), CSV = , csv = , csv.gz = , </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       csv.bz2 = , csv.xz = assign(name, my_read_table(file, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         header = TRUE, sep = ";", as.is = FALSE), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         envir = tmp_env), found &lt;- FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (found) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     break</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   message(if (!found) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     "*NOT* ", "found", domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (found) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 break</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         if (!found) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             warning(gettextf("data set %s not found", sQuote(name)), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         else if (!overwrite) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             for (o in ls(envir = tmp_env, all.names = TRUE)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (exists(o, envir = envir, inherits = FALSE)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   warning(gettextf("an object named %s already exists and will not be overwritten", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     sQuote(o)))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 else assign(o, get(o, envir = tmp_env, inherits = FALSE), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   envir = envir)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             rm(tmp_env)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     invisible(names)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;bytecode: 0x000001d001252d10&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: namespace:utils&gt;</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>object 'data' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="st">"data.csv"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>cannot remove file 'data.csv', reason 'No such file or directory'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="fu">load_data</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Loading original data from 'df.csv'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> No valid codebook found.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Object 'df' already exists in the environment designated by 'envir', and will be replaced with the contents of 'df.csv'.</span>
<span class="r-in"><span><span class="va">data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function (..., list = character(), package = NULL, lib.loc = NULL, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     verbose = getOption("verbose"), envir = .GlobalEnv, overwrite = TRUE) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     fileExt &lt;- function(x) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         db &lt;- grepl("\\.[^.]+\\.(gz|bz2|xz)$", x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ans &lt;- sub(".*\\.", "", x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ans[db] &lt;- sub(".*\\.([^.]+\\.)(gz|bz2|xz)$", "\\1\\2", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             x[db])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ans</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     my_read_table &lt;- function(...) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         lcc &lt;- Sys.getlocale("LC_COLLATE")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         on.exit(Sys.setlocale("LC_COLLATE", lcc))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Sys.setlocale("LC_COLLATE", "C")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         read.table(...)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     stopifnot(is.character(list))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     names &lt;- c(as.character(substitute(list(...))[-1L]), list)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (!is.null(package)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         if (!is.character(package)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             stop("'package' must be a character vector or NULL")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- find.package(package, lib.loc, verbose = verbose)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (is.null(lib.loc)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             paths)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- unique(normalizePath(paths[file.exists(paths)]))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- paths[dir.exists(file.path(paths, "data"))]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dataExts &lt;- tools:::.make_file_exts("data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     if (length(names) == 0L) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         db &lt;- matrix(character(), nrow = 0L, ncol = 4L)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         for (path in paths) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             entries &lt;- NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             packageName &lt;- if (file_test("-f", file.path(path, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "DESCRIPTION"))) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 basename(path)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             else "."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (file_test("-f", INDEX &lt;- file.path(path, "Meta", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "data.rds"))) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 entries &lt;- readRDS(INDEX)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 dataDir &lt;- file.path(path, "data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 entries &lt;- tools::list_files_with_type(dataDir, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   "data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (length(entries)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   entries &lt;- cbind(entries, "")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (NROW(entries)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   db &lt;- rbind(db, cbind(packageName, dirname(path), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     entries))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 else warning(gettextf("data index for package %s is invalid and will be ignored", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   sQuote(packageName)), domain = NA, call. = FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         colnames(db) &lt;- c("Package", "LibPath", "Item", "Title")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         footer &lt;- if (missing(package)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             paste0("Use ", sQuote(paste("data(package =", ".packages(all.available = TRUE))")), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 "\n", "to list the data sets in all *available* packages.")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         else NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         y &lt;- list(title = "Data sets", header = NULL, results = db, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             footer = footer)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         class(y) &lt;- "packageIQR"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         return(y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     paths &lt;- file.path(paths, "data")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     for (name in names) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         found &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         for (p in paths) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             tmp_env &lt;- if (overwrite) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 envir</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             else new.env()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (file_test("-f", file.path(p, "Rdata.rds"))) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 rds &lt;- readRDS(file.path(p, "Rdata.rds"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (name %in% names(rds)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   found &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     message(sprintf("name=%s:\t found in Rdata.rds", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       name), domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   thispkg &lt;- sub(".*/([^/]*)/data$", "\\1", p)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   thispkg &lt;- sub("_.*$", "", thispkg)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   thispkg &lt;- paste0("package:", thispkg)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   objs &lt;- rds[[name]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   lazyLoad(file.path(p, "Rdata"), envir = tmp_env, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     filter = function(x) x %in% objs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   break</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 else if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     name, paste(names(rds), collapse = ",")), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             files &lt;- list.files(p, full.names = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             files &lt;- files[grep(name, files, fixed = TRUE)]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (length(files) &gt; 1L) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 o &lt;- match(fileExt(files), dataExts, nomatch = 100L)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 paths0 &lt;- dirname(files)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 paths0 &lt;- factor(paths0, levels = unique(paths0))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 files &lt;- files[order(paths0, o)]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (length(files)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 for (file in files) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     message("name=", name, ":\t file= ...", .Platform$file.sep, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       basename(file), "::\t", appendLF = FALSE, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   ext &lt;- fileExt(file)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (basename(file) != paste0(name, ".", ext)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     found &lt;- FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   else {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     found &lt;- TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     switch(ext, R = , r = {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       library("utils")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       sys.source(file, chdir = TRUE, envir = tmp_env)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     }, RData = , rdata = , rda = load(file, envir = tmp_env), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       TXT = , txt = , tab = , tab.gz = , tab.bz2 = , </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       tab.xz = , txt.gz = , txt.bz2 = , txt.xz = assign(name, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         my_read_table(file, header = TRUE, as.is = FALSE), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         envir = tmp_env), CSV = , csv = , csv.gz = , </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       csv.bz2 = , csv.xz = assign(name, my_read_table(file, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         header = TRUE, sep = ";", as.is = FALSE), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         envir = tmp_env), found &lt;- FALSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   if (found) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     break</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (verbose) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   message(if (!found) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     "*NOT* ", "found", domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             if (found) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 break</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         if (!found) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             warning(gettextf("data set %s not found", sQuote(name)), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 domain = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         else if (!overwrite) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             for (o in ls(envir = tmp_env, all.names = TRUE)) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 if (exists(o, envir = envir, inherits = FALSE)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   warning(gettextf("an object named %s already exists and will not be overwritten", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     sQuote(o)))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 else assign(o, get(o, envir = tmp_env, inherits = FALSE), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   envir = envir)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             rm(tmp_env)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     invisible(names)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;bytecode: 0x000001d001252d10&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: namespace:utils&gt;</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">old_wd</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">test_dir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Caspar J. Van Lissa, Aaron Peikert, Andreas M. Brandmaier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

